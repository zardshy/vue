(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-99718d76"],{"6d7a":function(t,e,a){
/*!
 * author: sakitam-fdd <smilefdd@gmail.com> 
 * wind-layer v0.1.0
 * build-time: 2019-5-25 22:8
 * LICENSE: MIT
 * (c) 2017-2019 https://sakitam-fdd.github.io/wind-layer
 */
(function(e,i){t.exports=i(a("ec60"))})(0,function(t){"use strict";var e=function(t){void 0===t&&(t={}),this.params=t;var e=this;e.canvas=t.canvas;var a=["rgb(36,104, 180)","rgb(60,157, 194)","rgb(128,205,193 )","rgb(151,218,168 )","rgb(198,231,181)","rgb(238,247,217)","rgb(255,238,159)","rgb(252,217,125)","rgb(255,182,100)","rgb(252,150,75)","rgb(250,112,52)","rgb(245,64,32)","rgb(237,45,28)","rgb(220,24,32)","rgb(180,0,35)"],i=function(t){t.projection||(t.projection="EPSG:4326"),e.MIN_VELOCITY_INTENSITY=t.minVelocity||0,e.MAX_VELOCITY_INTENSITY=t.maxVelocity||10,e.VELOCITY_SCALE=(t.velocityScale||.005)*(Math.pow(window.devicePixelRatio,1/3)||1),e.MAX_PARTICLE_AGE=t.particleAge||90,e.PARTICLE_LINE_WIDTH=t.lineWidth||1,e.PARTICLE_MULTIPLIER=t.particleMultiplier||1/300,e.PARTICLE_REDUCTION=Math.pow(window.devicePixelRatio,1/3)||1.6,e.FRAME_RATE=t.frameRate||16,e.COLOR_SCALE=t.colorScale||a};i(t),window.FRAME_TIME=1e3/e.FRAME_RATE;var n,r,o,l,c,s,p,u,h,d,f=[NaN,NaN,null],m=e.params.data,y=function(t){m=t},g=function(t,e,a,i,n,r){var o=1-t,l=1-e,c=o*l,s=t*l,p=o*e,u=t*e,h=a[0]*c+i[0]*s+n[0]*p+r[0]*u,d=a[1]*c+i[1]*s+n[1]*p+r[1]*u;return[h,d,Math.sqrt(h*h+d*d)]},v=function(t,e){var a=t.data,i=e.data;return{header:t.header,data:function(t){return[a[t],i[t]]},interpolate:g}},w=function(t){var e=null,a=null;return t.forEach(function(t){switch(t.header.parameterCategory+","+t.header.parameterNumber){case"1,2":case"2,2":e=t;break;case"1,3":case"2,3":a=t;break;default:}}),v(e,a)},A=function(t,e){n=w(t);var a=n.header;l=a.lo1,c=Math.max(a.la2,a.la1),s=a.dx,p=a.dy,u=a.nx,h=a.ny,o=new Date(a.refTime),o.setHours(o.getHours()+a.forecastTime),r=[];for(var i=0,d=Math.floor(u*s)>=360,f=0;f<h;f++){for(var m=[],y=0;y<u;y++,i++)m[y]=n.data(i);d&&m.push(m[0]),r[f]=m}e({date:o,interpolate:C})},C=function(t,e){if(!r)return null;var a,i=M(t-l,360)/s,o=(c-e)/p,u=Math.floor(i),h=u+1,d=Math.floor(o),f=d+1;if(a=r[d]){var m=a[u],y=a[h];if(b(m)&&b(y)&&(a=r[f])){var g=a[u],v=a[h];if(b(g)&&b(v))return n.interpolate(i-u,o-d,m,y,g,v)}}return null},b=function(t){return null!==t&&void 0!==t},M=function(t,e){return t-e*Math.floor(t/e)},_=function(){return/android|blackberry|iemobile|ipad|iphone|ipod|opera mini|webos/i.test(navigator.userAgent)},x=function(t,e,a,i,n,r,o,l){var c=o[0]*r,s=o[1]*r,p=E(t,e,a,i,n,l);return o[0]=p[0]*c+p[2]*s,o[1]=p[1]*c+p[3]*s,o},E=function(t,a,i,n,r,o){var l=2*Math.PI,c="EPSG:4326"===e.params.projection?5:Math.pow(10,-5.2),s=a<0?c:-c,p=i<0?c:-c,u=P(i,a+s,o),h=P(i+p,a,o),d=Math.cos(i/360*l);return[(u[0]-n)/s/d,(u[1]-r)/s/d,(h[0]-n)/p,(h[1]-r)/p]},T=function(t,e,a){function i(e,a){var i=t[Math.round(e)];return i&&i[Math.round(a)]||f}i.release=function(){t=[]},i.randomize=function(t){var a,n,r=0;do{a=Math.round(Math.floor(Math.random()*e.width)+e.x),n=Math.round(Math.floor(Math.random()*e.height)+e.y)}while(null===i(a,n)[2]&&r++<30);return t.x=a,t.y=n,t},a(e,i)},R=function(t,e,a){var i=t[0],n=t[1],r=Math.round(i[0]),o=Math.max(Math.floor(i[1],0),0),l=(Math.min(Math.ceil(n[0],e),e-1),Math.min(Math.ceil(n[1],a),a-1));return{x:r,y:o,xMax:e,yMax:l,width:e,height:a}},S=function(t){return t/180*Math.PI},L=function(t){return t/(Math.PI/180)};d="EPSG:4326"===e.params.projection?function(t,e,a){var i=a.east-a.west,n=a.south-a.north,r=L(a.north)+e/a.height*L(n),o=L(a.west)+t/a.width*L(i);return[o,r]}:function(t,e,a){var i=a.east-a.west,n=a.width/L(i)*360/(2*Math.PI),r=n/2*Math.log((1+Math.sin(a.south))/(1-Math.sin(a.south))),o=a.height+r,l=(o-e)/n,c=180/Math.PI*(2*Math.atan(Math.exp(l))-Math.PI/2),s=L(a.west)+t/a.width*L(i);return[s,c]};var I,k=function(t){return Math.log(Math.tan(t/2+Math.PI/4))},P=function(t,e,a){var i=k(a.south),n=k(a.north),r=a.width/(a.east-a.west),o=a.height/(n-i),l=k(S(t)),c=(S(e)-a.west)*r;l=(n-l)*o;return[c,l]},O=function(t,a,i,n){var r={},o=(i.south-i.north)*(i.west-i.east),l=e.VELOCITY_SCALE*Math.pow(o,.4),c=[],s=a.x;function p(e){for(var n=[],o=a.y;o<=a.yMax;o+=2){var s=d(e,o,i);if(s){var p=s[0],u=s[1];if(isFinite(p)){var h=t.interpolate(p,u);h&&(h=x(r,p,u,e,o,l,h,i),n[o+1]=n[o]=h)}}}c[e+1]=c[e]=n}(function t(){var e=Date.now();while(s<a.width)if(p(s),s+=2,Date.now()-e>1e3)return void setTimeout(t,25);T(c,a,n)})()},D=function(a,i){function n(t,a){return e.COLOR_SCALE.indexFor=function(i){return Math.max(0,Math.min(e.COLOR_SCALE.length-1,Math.round((i-t)/(a-t)*(e.COLOR_SCALE.length-1))))},e.COLOR_SCALE}var r=n(e.MIN_VELOCITY_INTENSITY,e.MAX_VELOCITY_INTENSITY),o=r.map(function(){return[]}),l=Math.round(a.width*a.height*e.PARTICLE_MULTIPLIER);_()&&(l*=e.PARTICLE_REDUCTION);for(var c="rgba(0, 0, 0, 0.97)",s=[],p=0;p<l;p++)s.push(i.randomize({age:Math.floor(Math.random()*e.MAX_PARTICLE_AGE)+0}));function u(){o.forEach(function(t){t.length=0}),s.forEach(function(t){t.age>e.MAX_PARTICLE_AGE&&(i.randomize(t).age=0);var a=t.x,n=t.y,l=i(a,n),c=l[2];if(null===c)t.age=e.MAX_PARTICLE_AGE;else{var s=a+l[0],p=n+l[1];null!==i(s,p)[2]?(t.xt=s,t.yt=p,o[r.indexFor(c)].push(t)):(t.x=s,t.y=p)}t.age+=1})}var h=e.canvas.getContext("2d");function d(){var t="lighter";h.globalCompositeOperation="destination-in",h.fillRect(a.x,a.y,a.width,a.height),h.globalCompositeOperation=t,h.globalAlpha=.9,o.forEach(function(t,e){t.length>0&&(h.beginPath(),h.strokeStyle=r[e],t.forEach(function(t){h.moveTo(t.x,t.y),h.lineTo(t.xt,t.yt),t.x=t.xt,t.y=t.yt}),h.stroke())})}h.lineWidth=e.PARTICLE_LINE_WIDTH,h.fillStyle=c,h.globalAlpha=.6;var f=Date.now();(function e(){I=requestAnimationFrame(e);var a=Date.now(),i=a-f;i>FRAME_TIME&&(f=a-i%FRAME_TIME,u(),d(),t.onDraw&&t.onDraw())})()},F=function(t,a,i,n,r){delete e.params.data,e.params.data=t,r&&z(a,i,n,r)},z=function(t,e,a,i){var n={south:S(i[0][1]),north:S(i[1][1]),east:S(i[1][0]),west:S(i[0][0]),width:e,height:a};N(),A(m,function(i){O(i,R(t,e,a),n,function(t,e){q.field=e,D(t,e)})})},N=function(){q.field&&q.field.release(),I&&cancelAnimationFrame(I)},W=function(t,a){var i=e.canvas,n=i.width,r=i.height,o=i.getContext("2d");if(n>t&&r>a){var l=function(t,e){return Math.max(0,Math.min(t,e))},c=o.getImageData(l(n,-t),l(r,-a),l(n,n-t),l(r,r-a));o.clearRect(0,0,n,r),o.putImageData(c,l(n,t),l(r,a));for(var s=0,p=particles.length;s<p;s++)particles[s].x+=t,particles[s].y+=a}},V=function(t){e.params=t,i(e.params)},j=function(){return e.params},q={params:e.params,start:z,stop:N,update:F,shift:W,createField:T,interpolatePoint:C,setData:y,updateParams:V,getParams:j,buildParams:i};return q};window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/window.FRAME_RATE)}}(),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)});var a={minVelocity:0,maxVelocity:10,velocityScale:.05,particleAge:90,lineWidth:1,particleMultiplier:1/300,colorScale:void 0,animate:!0},i=function(t){function a(){t.apply(this,arguments)}return t&&(a.__proto__=t),a.prototype=Object.create(t&&t.prototype),a.prototype.constructor=a,a.prototype._initialize=function(){var t=this,a=this.getMap(),i=this.layer.getParams(),n=this.layer.getSpatialReference();n||(n=a.getSpatialReference());var r=n.getProjection();this._windy=new e(Object.assign({},{canvas:this.canvas,data:this.layer.getData(),projection:r.code||"EPSG:4326",onDraw:function(){t.setCanvasUpdated()}},i))},a.prototype.draw=function(){var t,e=this._getWindExtents();this.prepareCanvas(),this._windy||this._initialize(),this._windy&&(t=this._windy).start.apply(t,e)},a.prototype._redraw=function(){this.prepareRender(),this.draw()},a.prototype.drawOnInteracting=function(){},a.prototype._getWindExtents=function(){var t=this.getMap();if(!t)return null;var e=t.getExtent(),a=e.xmin,i=e.xmax>0?e.xmax:360+e.xmax,n=e.ymin,r=e.ymax;return[[[0,0],[t.width,t.height]],t.width,t.height,[[a,n],[i,r]]]},a.prototype._updateParams=function(){if(this._windy){var t=this.layer.getParams();this._windy.updateParams(t),this.draw()}},a.prototype.needToRedraw=function(){var e=this.getMap();return!(e.isZooming()&&!e.getPitch())&&t.prototype.needToRedraw.call(this)},a.prototype.onZoomStart=function(){t.prototype.onZoomStart.apply(this,arguments)},a.prototype.onZoomEnd=function(){t.prototype.onZoomEnd.apply(this,arguments)},a.prototype.onDragRotateStart=function(){},a.prototype.onMoveStart=function(){},a.prototype.remove=function(){this._windy&&(this._windy.stop(),delete this._windy),t.prototype.remove.call(this)},a}(t.renderer.CanvasRenderer),n=function(e){function i(t,i,n){e.call(this,t,Object.assign(a,n)),this._data=i}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.getData=function(){return this._data},i.prototype.setData=function(t){return this._data=t,this.redraw(),this},i.prototype.updateParams=function(t){var e=this._getRenderer();if(this.options=Object.assign(this.options,t),e){var a=this.options,i=a.minVelocity,n=a.maxVelocity,r=a.velocityScale,o=a.particleAge,l=a.lineWidth,c=a.particleMultiplier,s=a.colorScale;e._updateParams({minVelocity:i,maxVelocity:n,velocityScale:r,particleAge:o,lineWidth:l,particleMultiplier:c,colorScale:s})}return this},i.prototype.getParams=function(){var t=this.options,e=t.minVelocity,a=t.maxVelocity,i=t.velocityScale,n=t.particleAge,r=t.lineWidth,o=t.particleMultiplier,l=t.colorScale;return{minVelocity:e,maxVelocity:a,velocityScale:i,particleAge:n,lineWidth:r,particleMultiplier:o,colorScale:l}},i.prototype.onResize=function(){},i.prototype.onZoomStart=function(){},i.prototype.onZooming=function(){},i.prototype.onZoomEnd=function(){},i.prototype.onMoveStart=function(){},i.prototype.onMoving=function(){},i.prototype.onMoveEnd=function(){},i.prototype.redraw=function(){var t=this._getRenderer();return t&&t._redraw(),this},i.prototype.toJSON=function(){return{type:"MaptalksWindy",id:this.getId(),options:this.config(),data:this.getData()}},i.prototype.getSpatialReference=function(){var e=this.getMap();return!e||this.options.spatialReference&&!t.SpatialReference.equals(this.options.spatialReference,e.options.spatialReference)?(this._sr=this._sr||new t.SpatialReference(this.options.spatialReference),this._sr):e.getSpatialReference()},i.fromJSON=function(t){if(!t||"MaptalksWindy"!==t.type)return null;var e=new i(t.id,t.data,t.options);return e},i}(t.Layer);return n.registerRenderer("canvas",i),n})},cdc9:function(t,e,a){"use strict";var i=a("e1a8"),n=a.n(i);n.a},e1a8:function(t,e,a){},ffe8:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-location",plain:""},on:{click:t.add3Dmarker}},[t._v("添加3D标记")]),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-minus",plain:""},on:{click:t.addLine}},[t._v("动态画线")]),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-info",plain:""},on:{click:t.cj}},[t._v("测量距离")]),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-printer",plain:""},on:{click:t.exportjpg}},[t._v("导出jpg")]),a("div",{attrs:{id:"map"}})],1)},n=[],r=(a("5453"),a("ec60")),o=(a("6d7a"),{data:function(){return{map:null,white_bd:"http://online{s}.map.bdimg.com/onlinelabel/?qt=tile&x={x}&y={y}&z={z}&styles=pl&scaler=1&p=1",bule_bd:"http://api{s}.map.bdimg.com/customimage/tile?&x={x}&y={y}&z={z}&udt=20170620&scale=1&ak=8d6c8b8f3749aed6b1aff3aad6f40e37&styles=t%3Awater%7Ce%3Aall%7Cc%3A%23044161%2Ct%3Aland%7Ce%3Aall%7Cc%3A%23091934%2Ct%3Aboundary%7Ce%3Ag%7Cc%3A%23064f85%2Ct%3Arailway%7Ce%3Aall%7Cv%3Aoff%2Ct%3Ahighway%7Ce%3Ag%7Cc%3A%23004981%2Ct%3Ahighway%7Ce%3Ag.f%7Cc%3A%23005b96%7Cl%3A1%2Ct%3Ahighway%7Ce%3Al%7Cv%3Aon%2Ct%3Aarterial%7Ce%3Ag%7Cc%3A%23004981%7Cl%3A-39%2Ct%3Aarterial%7Ce%3Ag.f%7Cc%3A%2300508b%2Ct%3Agreen%7Ce%3Aall%7Cv%3Aoff%7Cc%3A%23056197%2Ct%3Asubway%7Ce%3Aall%7Cv%3Aoff%2Ct%3Amanmade%7Ce%3Aall%7Cv%3Aoff%2Ct%3Alocal%7Ce%3Aall%7Cv%3Aoff%2Ct%3Aarterial%7Ce%3Al%7Cv%3Aon%2Ct%3Aboundary%7Ce%3Ag.f%7Cc%3A%23029fd4%2Ct%3Abuilding%7Ce%3Aall%7Cc%3A%231a5787%2Ct%3Apoi%7Ce%3Aall%7Cv%3Aoff%2Ct%3Aall%7Ce%3Al%7Cv%3Aoff",tdt:"http://t{s}.tianditu.com/DataServer?T=vec_c&x={x}&y={y}&l={z}&tk=de0dc270a51aaca3dd4e64d4f8c81ff6"}},mounted:function(){var t=this;this.$nextTick(function(){return e()});var e=function(){var e={center:[105.19052356963802,36.04231948670001],zoom:5,cneter:[121],maxZoom:16,spatialReference:{projection:"baidu"},scaleControl:{position:"bottom-left",maxWidth:100,metric:!0,imperial:!0},zoomControl:{position:"top-right",slider:!0,zoomLevel:!0},overviewControl:{"level ":5,size:[130,80]},baseLayer:new r["TileLayer"]("base",{urlTemplate:t.white_bd,subdomains:[0,1,2],attribution:'&copy; <a href="http://www.osm.org" target="_blank">OpenStreetMap</a> contributors'})};t.map=new r["Map"]("map",e)}},methods:{add3Dmarker:function(){for(var t=new r["VectorLayer"]("3dmk",{enableAltitude:!0,drawAltitude:{lineWidth:1,lineColor:"red"}}).addTo(this.map),e=[],a=[[121.1,31.1331,10001],[121.12234,31.133,8001],[121.1342,31.13241,6001],[121.14,31.1123,7001],[121.4,31.223,10001],[121.2234,31.133,8001],[121.13,31.12341,6001],[121.14,31.1423,700]],i=0,n=a;i<n.length;i++){var o=n[i];e.push(new r["Marker"]([o[0],o[1]],{properties:{altitude:o[2]}}))}t.addGeometry(e),this.map.animateTo({center:[121.1,31.1],zoom:11,pitch:65,bearing:360},{duration:7e3})},addLine:function(){this.map.animateTo({center:[121.2,31.1],zoom:12,pitch:15,bearing:360},{duration:1e3});var t=new r["LineString"]([[121.1,31.1331,10001],[121.12234,31.133,8001],[121.1342,31.13241,6001],[121.14,31.1123,7001],[121.4,31.223,10001],[121.2234,31.133,8001],[121.13,31.12341,6001],[121.14,31.1423,700]],{visible:!1,arrowStyle:"classic",arrowPlacement:"vertex-last",symbol:{lineColor:"#1bbc9b",lineWidth:6}});new r["VectorLayer"]("vector",t).addTo(this.map);function e(){t.hide(),t.animateShow({duration:2500,easing:"out"},function(t){"finished"===t.state.playState&&console.log("finished")})}setTimeout(function(){e()},1200)},cj:function(){this.$notify({title:"单击地图开始测距! 双击结束测距！",type:"success"});new r["DistanceTool"]({symbol:{lineColor:"#34495e",lineWidth:2},vertexSymbol:{markerType:"ellipse",markerFill:"#1bbc9b",markerLineColor:"#000",markerLineWidth:3,markerWidth:10,markerHeight:10},labelOptions:{textSymbol:{textFaceName:"monospace",textFill:"#fff",textLineSpacing:1,textHorizontalAlignment:"right",textDx:15,markerLineColor:"#b4b3b3",markerFill:"#000"},boxStyle:{padding:[6,2],symbol:{markerType:"square",markerFill:"#000",markerFillOpacity:.9,markerLineColor:"#b4b3b3"}}},clearButtonSymbol:[{markerType:"square",markerFill:"#000",markerLineColor:"#b4b3b3",markerLineWidth:2,markerWidth:15,markerHeight:15,markerDx:20},{markerType:"x",markerWidth:10,markerHeight:10,markerLineColor:"#fff",markerDx:20}],language:"en-US"}).addTo(this.map)},exportjpg:function(){this.map.toDataURL({mimeType:"image/jpeg",save:!0,fileName:"map"})}}}),l=o,c=(a("cdc9"),a("2877")),s=Object(c["a"])(l,i,n,!1,null,"8bd6d104",null);e["default"]=s.exports}}]);
//# sourceMappingURL=chunk-99718d76.ce77d338.js.map